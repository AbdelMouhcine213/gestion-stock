<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© POS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    margin:0;
    font-family:"Comic Sans MS", Arial;
    direction:rtl;
    background:linear-gradient(135deg,#232526,#414345);
    color:white;
}
header{
    padding:20px;
    text-align:center;
    font-size:32px;
    font-weight:bold;
    box-shadow:0 0 20px #ff944d;
}
.section{
    margin:20px;
    padding:25px;
    background:rgba(0,0,0,.4);
    border-radius:20px;
    box-shadow:0 0 15px #ff944d;
}
h3{
    margin-top:0;
}
input, select, button{
    padding:8px;
    font-size:16px;
    border-radius:8px;
    border:none;
    margin:5px 0;
}
button{
    cursor:pointer;
    background:#ff944d;
    color:white;
}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
    background:rgba(255,255,255,0.9);
    color:#000;
}
th, td{
    border:1px solid #ddd;
    padding:8px;
    text-align:center;
}
th{
    background:#ff944d;
    color:white;
}
td input{
    width:90px;
    text-align:center;
}
</style>
</head>

<body>

<header>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª POS Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</header>

<!-- ===== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ===== -->
<div class="section">
    <h3>ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</h3>
    <div>
        <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
        <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <select id="role">
            <option value="admin">Ù…Ø¯ÙŠØ±</option>
            <option value="staff">Ù…ÙˆØ¸Ù</option>
        </select>
        <button onclick="addUser()">Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…</button>
    </div>
    <table id="usersTable">
        <thead>
            <tr>
                <th>Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                <th>Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th>
                <th>ØªØ¹Ø¯ÙŠÙ„/Ø­Ø°Ù</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<!-- ===== Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ===== -->
<div class="section">
    <h3>ğŸ¨ Ø§Ù„Ø«ÙŠÙ… ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù†</h3>
    <div>
        <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ: </label>
        <input type="color" id="primaryColor" onchange="updateTheme()">
        <label>Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø«Ø§Ù†ÙˆÙŠ: </label>
        <input type="color" id="secondaryColor" onchange="updateTheme()">
        <label>Ø§Ù„ÙˆØ¶Ø¹: </label>
        <select id="themeMode" onchange="updateTheme()">
            <option value="light">ÙØ§ØªØ­</option>
            <option value="dark">Ø¯Ø§ÙƒÙ†</option>
        </select>
    </div>
</div>

<!-- ===== Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ===== -->
<div class="section">
    <h3>ğŸ” Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</h3>
    <div>
        <label><input type="checkbox" id="allowSales"> Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</label><br>
        <label><input type="checkbox" id="allowEdit"> Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</label><br>
        <label><input type="checkbox" id="allowDelete"> Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø­Ø°Ù</label><br>
        <label><input type="checkbox" id="allowStats"> Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</label><br>
        <button onclick="savePermissions()">Ø­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</button>
    </div>
</div>

<!-- ===== Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª ===== -->
<div class="section">
    <h3>ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª</h3>
    <label><input type="checkbox" id="lowStockAlert"> ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ Ø§Ù†Ø®ÙØ§Ø¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</label><br>
    <label><input type="checkbox" id="highSaleAlert"> ØªÙ†Ø¨ÙŠÙ‡ Ø¹Ù†Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª ÙƒØ¨ÙŠØ±Ø©</label><br>
    <button onclick="savePreferences()">Ø­ÙØ¸ Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª</button>
</div>

<!-- ===== Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ ===== -->
<div class="section">
    <h3>ğŸ’¾ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
    <button onclick="exportData()">ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
    <input type="file" id="importFile" onchange="importData(event)">
</div>

<script>
// ===== Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† =====
let users = JSON.parse(localStorage.getItem("users")) || [];
function renderUsers(){
    const tbody = document.querySelector("#usersTable tbody");
    tbody.innerHTML="";
    users.forEach((u,i)=>{
        let tr=document.createElement("tr");
        tr.innerHTML=`
            <td>${u.username}</td>
            <td>${u.role}</td>
            <td>
                <button onclick="editUser(${i})">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
                <button onclick="deleteUser(${i})">âŒ Ø­Ø°Ù</button>
            </td>`;
        tbody.appendChild(tr);
    });
}
function addUser(){
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const role = document.getElementById("role").value;

    if(!username || !password){ alert("Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"); return; }

    let existing = users.find(u=>u.username===username);
    if(existing){
        existing.password = password;
        existing.role = role;
    } else {
        users.push({username,password,role});
    }
    localStorage.setItem("users", JSON.stringify(users));
    renderUsers();
}
function editUser(i){
    let u=users[i];
    document.getElementById("username").value=u.username;
    document.getElementById("password").value=u.password;
    document.getElementById("role").value=u.role;
}
function deleteUser(i){
    if(!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ØŸ")) return;
    users.splice(i,1);
    localStorage.setItem("users", JSON.stringify(users));
    renderUsers();
}

// ===== Ø§Ù„Ø«ÙŠÙ… =====
function updateTheme(){
    const primary = document.getElementById("primaryColor").value;
    const secondary = document.getElementById("secondaryColor").value;
    const mode = document.getElementById("themeMode").value;

    document.body.style.background = mode==="dark" ? `linear-gradient(135deg, ${primary}, ${secondary})` : "#f0f0f0";
    document.body.style.color = mode==="dark" ? "white":"black";
}

// ===== Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª =====
function savePermissions(){
    const permissions = {
        allowSales: document.getElementById("allowSales").checked,
        allowEdit: document.getElementById("allowEdit").checked,
        allowDelete: document.getElementById("allowDelete").checked,
        allowStats: document.getElementById("allowStats").checked
    };
    localStorage.setItem("permissions", JSON.stringify(permissions));
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª âœ…");
}

// ===== Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª =====
function savePreferences(){
    const prefs = {
        lowStockAlert: document.getElementById("lowStockAlert").checked,
        highSaleAlert: document.getElementById("highSaleAlert").checked
    };
    localStorage.setItem("preferences", JSON.stringify(prefs));
    alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª âœ…");
}

// ===== Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ =====
function exportData(){
    const data = {
        users: users,
        permissions: JSON.parse(localStorage.getItem("permissions"))||{},
        preferences: JSON.parse(localStorage.getItem("preferences"))||{},
        stock: JSON.parse(localStorage.getItem("stock"))||[],
        salesHistory: JSON.parse(localStorage.getItem("salesHistory"))||[]
    };
    const blob = new Blob([JSON.stringify(data,null,2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href=url;
    a.download="pos_backup.json";
    a.click();
}
function importData(event){
    const file = event.target.files[0];
    const reader = new FileReader();
    reader.onload = function(e){
        try{
            const data = JSON.parse(e.target.result);
            if(data.users) localStorage.setItem("users", JSON.stringify(data.users));
            if(data.permissions) localStorage.setItem("permissions", JSON.stringify(data.permissions));
            if(data.preferences) localStorage.setItem("preferences", JSON.stringify(data.preferences));
            if(data.stock) localStorage.setItem("stock", JSON.stringify(data.stock));
            if(data.salesHistory) localStorage.setItem("salesHistory", JSON.stringify(data.salesHistory));
            alert("ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…");
            location.reload();
        }catch(err){
            alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ù„Ù");
        }
    }
    reader.readAsText(file);
}

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
renderUsers();
</script>

</body>
</html>
