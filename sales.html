<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø´Ø§Ø´Ø© Ø§Ù„Ø¨ÙŠØ¹ POS</title>

<style>
body{
    margin:0;
    font-family:Tahoma;
    direction:rtl;
    background:#f1f5f9;
}
header{
    background:#1e293b;
    color:#fff;
    padding:15px;
    font-size:20px;
}
.container{
    display:flex;
}
.products{
    width:65%;
    padding:15px;
}
.cart{
    width:35%;
    background:#fff;
    padding:15px;
    border-right:3px solid #e5e7eb;
}

/* Ø§Ù„Ø¨Ø­Ø« */
.search{
    width:100%;
    padding:10px;
    margin-bottom:15px;
    font-size:16px;
}

/* Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª */
.category{
    margin-bottom:25px;
}
.category h3{
    background:#0ea5e9;
    color:#fff;
    padding:8px;
    border-radius:6px;
}

/* Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
.items{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
}
.item{
    width:120px;
    background:#fff;
    border:1px solid #ddd;
    border-radius:6px;
    text-align:center;
    padding:8px;
    cursor:pointer;
}
.item img{
    width:100%;
    height:80px;
    object-fit:cover;
}
.stock{
    font-size:12px;
    color:#ef4444;
}

/* Ø§Ù„Ø³Ù„Ø© */
.cart input{
    width:100%;
    padding:8px;
    margin-bottom:10px;
    font-size:16px;
}
table{
    width:100%;
    border-collapse:collapse;
}
th,td{
    border-bottom:1px solid #ddd;
    padding:6px;
    text-align:center;
}
.total{
    margin-top:10px;
    font-size:18px;
    font-weight:bold;
}
button{
    padding:5px 8px;
    cursor:pointer;
}
</style>
</head>

<body>

<header>ğŸ§¾ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨ÙŠØ¹</header>

<div class="container">

<!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<div class="products">

<input type="text" class="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬" onkeyup="searchProducts(this.value)">

<div id="products"></div>

</div>

<!-- Ø§Ù„Ø³Ù„Ø© -->
<div class="cart">

<input type="text" id="cartName" value="Ø³Ù„Ø© Ø¨ÙŠØ¹ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©">

<table>
<thead>
<tr>
<th>Ø§Ù„Ù…Ù†ØªØ¬</th>
<th>ÙƒÙ…ÙŠØ©</th>
<th>Ø³Ø¹Ø±</th>
<th>Ø­Ø°Ù</th>
</tr>
</thead>
<tbody id="cartItems"></tbody>
</table>

<div class="total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="total">0</span> Ø¯Ø¬</div>

</div>

</div>

<script>
// Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…Ø¬Ù…ÙˆØ¹Ø§Øª + ØµÙˆØ±)
let categories = [
{
name:"Ø­Ø¨ÙˆØ¨",
products:[
{id:1,name:"Ø£Ø±Ø²",price:120,stock:20,img:"images/rice.jpg"},
{id:2,name:"Ø¹Ø¯Ø³",price:150,stock:15,img:"images/lentil.jpg"}
]
},
{
name:"Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©",
products:[
{id:3,name:"Ø³ÙƒØ±",price:90,stock:30,img:"images/sugar.jpg"},
{id:4,name:"ÙØ±ÙŠÙ†Ø©",price:70,stock:25,img:"images/flour.jpg"}
]
}
];

let cart = [];

// Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
function renderProducts(list=categories){
let html="";
list.forEach(cat=>{
html+=`<div class="category">
<h3>${cat.name}</h3>
<div class="items">`;
cat.products.forEach(p=>{
html+=`
<div class="item" onclick="addToCart(${p.id})">
<img src="${p.img}">
<div>${p.name}</div>
<div>${p.price} Ø¯Ø¬</div>
<div class="stock">Ù…ØªØ¨Ù‚ÙŠ: ${p.stock}</div>
</div>`;
});
html+=`</div></div>`;
});
document.getElementById("products").innerHTML=html;
}
renderProducts();

// Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
function addToCart(id){
let product;
categories.forEach(c=>{
c.products.forEach(p=>{
if(p.id===id) product=p;
});
});
if(product.stock<=0) return alert("Ø§Ù„ÙƒÙ…ÙŠØ© Ù…Ù†ØªÙ‡ÙŠØ©");

let item=cart.find(i=>i.id===id);
if(item){
item.qty++;
}else{
cart.push({id:product.id,name:product.name,price:product.price,qty:1});
}
product.stock--;
renderCart();
renderProducts();
}

// Ø§Ù„Ø³Ù„Ø©
function renderCart(){
let html="";
let total=0;
cart.forEach((i,index)=>{
total+=i.price*i.qty;
html+=`
<tr>
<td>${i.name}</td>
<td>
<input type="number" value="${i.qty}" min="1"
onchange="updateQty(${index},this.value)">
</td>
<td>${i.price*i.qty}</td>
<td><button onclick="removeItem(${index})">âŒ</button></td>
</tr>`;
});
document.getElementById("cartItems").innerHTML=html;
document.getElementById("total").innerText=total;
}

// ØªØ¹Ø¯ÙŠÙ„ ÙƒÙ…ÙŠØ©
function updateQty(index,value){
let diff=value-cart[index].qty;
let product;
categories.forEach(c=>{
c.products.forEach(p=>{
if(p.id===cart[index].id) product=p;
});
});
if(product.stock-diff<0) return alert("ÙƒÙ…ÙŠØ© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©");
product.stock-=diff;
cart[index].qty=parseInt(value);
renderCart();
renderProducts();
}

// Ø­Ø°Ù
function removeItem(index){
let product;
categories.forEach(c=>{
c.products.forEach(p=>{
if(p.id===cart[index].id) product=p;
});
});
product.stock+=cart[index].qty;
cart.splice(index,1);
renderCart();
renderProducts();
}

// Ø§Ù„Ø¨Ø­Ø«
function searchProducts(txt){
txt=txt.toLowerCase();
let filtered=[];
categories.forEach(c=>{
let prods=c.products.filter(p=>p.name.toLowerCase().includes(txt));
if(prods.length>0){
filtered.push({name:c.name,products:prods});
}
});
renderProducts(filtered);
}
</script>

</body>
</html>
